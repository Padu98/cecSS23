import urllib.request
import json
import os
import ssl



##neu hinzugefügt für eigene bilder

import base64
##Dateipfad von bild bei bedarf ändern
#binary_fc = open('/home/pi/Dokumente/CEC_Projekt_1/Echinocytes-Test/E (9).png', "rb").read()
#base64_img = base64.b64encode(binary_fc).decode("utf-8")

img_folder_path = "CEC_ML_Portraits_png (1)/Portraits_png/all_test"

##file = [f for f in os.listdir(img_folder_path)]


def allowSelfSignedHttps(allowed):
    # bypass the server certificate verification on client side
    if allowed and not os.environ.get('PYTHONHTTPSVERIFY', '') and getattr(ssl, '_create_unverified_context', None):
        ssl._create_default_https_context = ssl._create_unverified_context

allowSelfSignedHttps(True) # this line is needed if you use self-signed certificate in your scoring service.

# Request data goes here
# The example below assumes JSON formatting which may be updated
# depending on the format your endpoint expects.
# More information can be found here:
# https://docs.microsoft.com/azure/machine-learning/how-to-deploy-advanced-entry-script
for img_path in os.listdir(img_folder_path):
    def allowSelfSignedHttps(allowed):
        # bypass the server certificate verification on client side
        if allowed and not os.environ.get('PYTHONHTTPSVERIFY', '') and getattr(ssl, '_create_unverified_context', None):
            ssl._create_default_https_context = ssl._create_unverified_context


    allowSelfSignedHttps(True)  # this line is needed if you use self-signed certificate in your scoring service.

    binary_fc = open(img_folder_path+"/"+img_path, "rb").read()
    base64_img = base64.b64encode(binary_fc).decode("utf-8")
    print(img_path)
    data =  {
      "Inputs": {
        "WebServiceInput0": [
          {
            "image": "data:image/png;base64, "+ base64_img,
    #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",
            "id": 0,
            "category": "Discocytes-Train"
          }
        ]
      },
      "GlobalParameters": {}
    }

    body = str.encode(json.dumps(data))

    url = 'http://d999a40e-8f10-47ee-997b-7595c17ce16b.northeurope.azurecontainer.io/score'
    # Replace this with the primary/secondary key or AMLToken for the endpoint
    api_key = '1DPxrLElirClIrsxTADDSDHYngKoH5Zo'
    if not api_key:
        raise Exception("A key should be provided to invoke the endpoint")


    headers = {'Content-Type':'application/json', 'Authorization':('Bearer '+ api_key)}

    req = urllib.request.Request(url, body, headers)

    try:
        response = urllib.request.urlopen(req)

        result = response.read()
        print(result)
    except urllib.error.HTTPError as error:
        print("The request failed with status code: " + str(error.code))

        # Print the headers - they include the requert ID and the timestamp, which are useful for debugging the failure
        print(error.info())
        print(error.read().decode("utf8", 'ignore'))
